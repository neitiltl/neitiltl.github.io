<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap-harjoitus</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="top p-5  text-center">
        <h1>MUSIC NON STOP</h1>
        <h4><strong>iTunes-haku</strong></h4>
    </div>

    <nav class="navbar navbar-expand-sm  navbar-custom">
        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link active" href="index.html">Front Page</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="sanat.html">Lyrics</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="body-container">
        <div class="content">

            <div class="row">

                <div class="col-sm-4">
                    <h2>&#127926; INFORMATION</h2>

                    <div class="memory-container">
                        <p>Harjoitustyö hyödyntää iTunesin avointa rajapintaa.</p>
                        <p> Voit hakea artistien, kappaleiden ja albumien tietoja JSON-muodossa ja kuunnella selaimessa
                            lyhyen pätkän kappaleista.
                        </p>
                    </div>

                    <h3 class="mt-4">&#127926; Help!</h3>
                    <div class="memory-container">

                        <h3>Musiikkilehtiä:</h3>
                        <ul class="nav nav-pills flex-column">

                            <li class="nav-item">
                                <a class="nav-link " href="https://www.rollingstone.com/" target="_blank"
                                    rel="noreferrer noopener">Rolling Stone</a>
                            </li>
                            <!-- tabnabbing @ card-footer: https://www.freecodecamp.org/news/how-to-use-html-to-open-link-in-new-tab/  -->

                            <li class="nav-item">
                                <a class="nav-link " href="https://pitchfork.com/" target="_blank"
                                    rel="noreferrer noopener">Pitchfork</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link " href="https://www.nme.com/" target="_blank"
                                    rel="noreferrer noopener">NME</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link " href="https://www.kerrang.com/" target="_blank"
                                    rel="noreferrer noopener">Kerrang!</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link " href="https://www.soundi.fi/" target="_blank"
                                    rel="noreferrer noopener">SOUNDI</a>
                            </li>

                        </ul>
                        <hr class="d-sm-none">
                    </div>
                </div>


                <div class="col-sm-8">
                    <h2>&#127926; SEARCHING</h2>
                    <div class="card-container">
                        <p>Hae kappaleita iTunesista syöttämällä hakukenttään artistin, albumin tai kappaleen nimi
                        </p>

                        <div class="input-group mb-3">
                            <span class="input-group-text" rounded ms-2>&#127926;</span>
                            <input type="text" id="searchTerm" class="form-control rounded" placeholder="Hakusanat">
                            <button class="btn buttonsend ms-2 rounded" onclick="searchArtist()">Hae</button>
                        </div>

                    </div>

                    <!-- tulostetaan results -->
                    <div id="results" ; style=" margin-top: 20px;"></div>

                    <script>
                        function searchArtist() {
                            const term = document.getElementById("searchTerm").value;

                            /* https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/iTuneSearchAPI/Searching.html#//apple_ref/doc/uid/TP40017632-CH5-SW1 */

                            fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(term)}&entity=song&limit=12`)
                                .then(response => response.json())
                                .then(data => {
                                    let html = '<div class="row g-3">'; // korttirivin alku
                                    data.results.forEach(song => {
                                        html += `

                        <div class="col-md-4">
                            
                            <div class="card ">
                                <img src="${song.artworkUrl100}" class="card-img-top p-4 rounded" alt="Album art">
                                <div class="card-body text-center">
                                    <h5 class="card-title">${song.trackName}</h5>
                                    <p class="card-text">
                                        <strong>Artist:</strong> ${song.artistName}<br>
                                        <strong>Album:</strong> ${song.collectionName}
                                    </p>
                                </div>

                                <div class="card-footer">
                                   <a href="${song.artistViewUrl}" class="btn buttonartist" target="_blank" rel="noreferrer noopener">${song.artistName}</a>
                                   <audio controls class="w-100">
                                        <source src="${song.previewUrl}" type="audio/mpeg">
                                        Your browser does not support audio.
                                    </audio>
                                </div>
                            </div>
                        </div>
                    `;
                                    });
                                    html += '</div>'; // rivin sulku
                                    document.getElementById("results").innerHTML = html;
                                })
                                .catch(error => {
                                    document.getElementById("results").innerHTML = "<p>Tietoja ei saatu haettua.</p>";
                                    console.error(error);
                                });
                        }
                    </script>
                </div>
            </div>

        </div>
    </div>


    <div class="footer">
        <p>© 2025 MUSIC NON STOP – Powered by iTunes API</p>
    </div>

</body>

</html>