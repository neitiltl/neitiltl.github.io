<!DOCTYPE html>
<html lang="en">

<head>
    <title>Music Non Stop</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="top p-5  text-center">
        <h1>MUSIC NON STOP</h1>
        <h4><strong>iTunes-haku</strong></h4>
    </div>

    <nav class="navbar navbar-expand-sm  navbar-custom">
        <div class="container-fluid">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Front Page</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="search.html">Searching</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="body-container">
        <div class="content">

            <div class="row">

                <div class="col-sm-4">
                    <h2>&#127926; INFORMATION</h2>

                    <div class="info-container">
                        <p>Tämä harjoitustyö hyödyntää iTunesin avointa rajapintaa.</p>
                        <p>Etusivulle latautuvat automaattisesti Kraftwerkin albumit.</p>
                        <p> Haku-sivulla voi etsiä musiikkia artistin tai kappaleen nimellä ja kuunnella lyhyitä
                            näytteitä.
                        </p>
                    </div>

                    <h3 class="mt-4">&#127926; LYRICS</h3>
                    <div class="info-container">

                        <p>Ovatko kappaleen sanat unohtuneet? Näiltä sivuilta voit etsiä apua:</p>

                        <div class="card">
                            <div class="card-body"><a class="nav-link "
                                    href="https://www.chosic.com/find-song-by-lyrics/" target="_blank"
                                    rel="noreferrer noopener">Song Finder by
                                    Lyrics</a></div>
                            <div class="card-footer"><i>Search for songs by partial lyrics.</i></div>
                        </div>

                        <div class="card">
                            <div class="card-body"><a class="nav-link " href="https://lyricradar.com/" target="_blank"
                                    rel="noreferrer noopener">Free Online Lyric Finder</a></div>
                            <div class="card-footer"> <i>Find missing lyrics by song name and artist.</i></div>
                        </div>

                        <div class="card">
                            <div class="card-body"><a class="nav-link " href="https://www.azlyrics.com/" target="_blank"
                                    rel="noreferrer noopener">AZLyrics</a></div>
                            <div class="card-footer"><i>We have a large, legal, every day growing universe of
                                    lyrics where stars of all genres and ages shine.</i></div>
                        </div>

                        <div class="card">
                            <div class="card-body"><a class="nav-link " href="https://lyrics.fi/" target="_blank"
                                    rel="noreferrer noopener">Lyrics.fi</a></div>
                            <div class="card-footer"><i>Kattavin kokoelma suomalaisten kappaleiden sanoituksia.</i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-8">
                    <h2>&#127926; SEARCHING</h2>
                    <div class="card-container">
                        <p>Syötä hakukenttään artistin, albumin tai kappaleen nimi ja paina <strong>Hae</strong>. Voit
                            kuunnella tuloksista puolen minuutin näytteen.
                        </p>
                        <p>Huomaa, että tuloksia näytetään enintään 25.</p>

                        <div class="input-group mb-3">
                            <span class="input-group-text" rounded ms-2>&#127926;</span>
                            <input type="text" id="searchTerm" class="form-control rounded" placeholder="Hakusanat"
                                value="kraftwerk music non stop">
                            <button class="btn buttonsend ms-2 rounded" onclick="searchArtist()">Hae</button>
                        </div>

                    </div>

                    <!-- tulostetaan results -->
                    <div id="results" style=" margin-top: 20px;"></div>

                    <script>

                        function searchArtist() {
                            const term = document.getElementById("searchTerm").value;

                            /* https://publicapi.dev/i-tunes-api
                            https://developer.apple.com/library/archive/documentation/AudioVideo/Conceptual/iTuneSearchAPI/Searching.html#//apple_ref/doc/uid/TP40017632-CH5-SW1 */

                            fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(term)}&entity=song&limit=25`)
                                .then(response => response.json())
                                .then(data => {
                                    let html = '<div class="row g-3">'; // korttirivin alku
                                    data.results.forEach(song => {
                                        html += `

                        <div class="col-md-4">
                            
                            <div class="card ">
                                <img src="${song.artworkUrl100}" class="card-img-top p-4 rounded" alt="Album art">
                                <div class="card-body text-center">
                                    <h5 class="card-title">${song.trackName}</h5>
                                    <p class="card-text">
                                        <strong>Artist:</strong> ${song.artistName}<br>
                                        <strong>Album:</strong> ${song.collectionName}
                                    </p>
                                </div>

                                <div class="card-footer">
                                   <a href="${song.artistViewUrl}" class="btn buttonartist" target="_blank" rel="noreferrer noopener">${song.artistName}</a>
                                   <audio controls class="w-100">
                                        <source src="${song.previewUrl}" type="audio/mpeg">
                                        Your browser does not support audio.
                                    </audio>
                                </div>
                            </div>
                        </div>
                    `;
                                    });
                                    html += '</div>'; // rivin sulku
                                    document.getElementById("results").innerHTML = html;
                                })
                                .catch(error => {
                                    document.getElementById("results").innerHTML = "<p>Tietoja ei saatu haettua.</p>";
                                    console.error(error);
                                });
                        }
                    </script>
                </div>
            </div>

        </div>
    </div>


    <div class="footer">
        <p>© 2025 MUSIC NON STOP – Powered by iTunes API</p>
    </div>

</body>

</html>